<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Rack::Accept::Header::PublicInstanceMethods [Rack::Accept API Documentation]</title>
    <meta content='text/html; charset=utf8' http-equiv='Content-Type'>
    <link href='../../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          Rack::Accept::Header::PublicInstanceMethods
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../../files/lib/rack/accept/header_rb.html">lib/rack/accept/header.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000007">accept?</a></li>
              <li><a href="#M000009">best_of</a></li>
              <li><a href="#M000006">qvalue</a></li>
              <li><a href="#M000008">sort</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000007'>
                <a name='M000007'></a>
                <div class='synopsis'>
                  <span class='name'>accept?</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Determines if the given <tt>value</tt> is acceptable (does not have a
                  qvalue of 0) according to this header.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000007-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000007-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 58</span>&#x000A;58:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept?</span>(<span class="ruby-identifier">value</span>)&#x000A;59:         <span class="ruby-identifier">qvalue</span>(<span class="ruby-identifier">value</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>&#x000A;60:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000009'>
                <a name='M000009'></a>
                <div class='synopsis'>
                  <span class='name'>best_of</span>
                  <span class='arguments'>(values, keep_unacceptables=false)</span>
                </div>
                <div class='description'>
                  <p>
                  Determines the most preferred value to use of those provided in
                  <tt>values</tt>. See the documentation for <a
                  href="PublicInstanceMethods.html#M000008">sort</a> for more information on
                  exactly how the sorting is done.
                  </p>
                  <p>
                  If <tt>keep_unacceptables</tt> is false (the default) and no values are
                  acceptable the return value will be <tt>nil</tt>. Otherwise, the most
                  acceptable value will be returned.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000009-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000009-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 86</span>&#x000A;86:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">best_of</span>(<span class="ruby-identifier">values</span>, <span class="ruby-identifier">keep_unacceptables</span>=<span class="ruby-keyword kw">false</span>)&#x000A;87:         <span class="ruby-identifier">s</span> = <span class="ruby-identifier">sort</span>(<span class="ruby-identifier">values</span>)&#x000A;88:         <span class="ruby-identifier">s</span>.<span class="ruby-identifier">reject!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">q</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">q</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> } <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">keep_unacceptables</span>&#x000A;89:         <span class="ruby-identifier">s</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">1</span>]&#x000A;90:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000006'>
                <a name='M000006'></a>
                <div class='synopsis'>
                  <span class='name'>qvalue</span>
                  <span class='arguments'>(value)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the quality factor (qvalue) of the given <tt>value</tt>. This
                  method is the only method that must be overridden in child classes in order
                  for them to be able to use all other methods of this module.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000006-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000006-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 52</span>&#x000A;52:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">qvalue</span>(<span class="ruby-identifier">value</span>)&#x000A;53:         <span class="ruby-value">1</span>&#x000A;54:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000008'>
                <a name='M000008'></a>
                <div class='synopsis'>
                  <span class='name'>sort</span>
                  <span class='arguments'>(values)</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a copy of the given <tt>values</tt> array, sorted by quality factor
                  (qvalue). Each element of the returned array is itself an array containing
                  two objects: 1) the value&#8217;s qvalue and 2) the original value.
                  </p>
                  <p>
                  It is important to note that when performing this sort the order of the
                  original values is preserved so long as the qvalue for each input value is
                  the same. This expectation can be useful for example when trying to
                  determine which of a variety of options has the highest qvalue. If the user
                  prefers using one option over another (for any number of reasons), he
                  should put it first in <tt>values</tt>. He may then use the first result
                  with confidence that it is both most acceptable to the user and most
                  convenient for him as well.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'>    <span class="ruby-comment cmt"># File lib/rack/accept/header.rb, line 75</span>&#x000A;75:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sort</span>(<span class="ruby-identifier">values</span>)&#x000A;76:         <span class="ruby-identifier">values</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [ <span class="ruby-identifier">qvalue</span>(<span class="ruby-identifier">v</span>), <span class="ruby-identifier">v</span> ] }.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">reverse</span>&#x000A;77:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
